"use strict";(self.webpackChunkionic5fullapp_final=self.webpackChunkionic5fullapp_final||[]).push([[574],{50574:function(e,o,i){i.r(o),i.d(o,{ShoppingCheckoutPageModule:function(){return _}});var n=i(38583),t=i(3679),s=i(52462),r=i(17410),a=i(64762),l=i(80226),d=i(21444),c=i(73028),g=i(62272),Z=i(73071),u=i(67092);function h(e,o){if(1&e&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&e){const e=o.$implicit;g.xp6(1),g.hij("",e.name," \xa0")}}function p(e,o){if(1&e&&(g.TgZ(0,"ion-item",41),g.TgZ(1,"ion-thumbnail",1),g._UZ(2,"ion-img",42),g.qZA(),g.TgZ(3,"ion-label",13),g.TgZ(4,"h3"),g._uU(5),g.qZA(),g.TgZ(6,"p"),g._uU(7),g.qZA(),g.TgZ(8,"p"),g._uU(9," Addon: "),g.YNc(10,h,2,1,"span",43),g.qZA(),g.qZA(),g.TgZ(11,"h5",44),g._uU(12),g.ALo(13,"currency"),g.qZA(),g.qZA()),2&e){const e=o.$implicit;g.xp6(2),g.Q6J("src",e.image),g.xp6(3),g.Oqu(e.name),g.xp6(2),g.hij("Size: ",e.size,""),g.xp6(3),g.Q6J("ngForOf",e.addOn),g.xp6(2),g.Oqu(g.Dn7(13,5,e.price,"USD","symbol"))}}function m(e,o){if(1&e){const e=g.EpF();g.TgZ(0,"div",22),g.TgZ(1,"ion-item-sliding"),g.TgZ(2,"ion-item",9),g.TgZ(3,"ion-label"),g.TgZ(4,"p"),g._uU(5),g.qZA(),g.TgZ(6,"h3"),g._uU(7),g.qZA(),g.TgZ(8,"h3",45),g._uU(9),g.qZA(),g.TgZ(10,"h3"),g._uU(11),g.qZA(),g.qZA(),g._UZ(12,"ion-radio",46),g.qZA(),g.TgZ(13,"ion-item-options",47),g.TgZ(14,"ion-item-option",48),g.NdJ("click",function(){const o=g.CHM(e).$implicit;return g.oxw().editAddressModal(o.id)}),g._uU(15,"Edit"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=o.$implicit;g.xp6(5),g.Oqu(e.label),g.xp6(2),g.Oqu(e.fullname),g.xp6(2),g.Oqu(e.address),g.xp6(2),g.Oqu(e.phone),g.xp6(1),g.Q6J("value",e.id)}}function A(e,o){if(1&e){const e=g.EpF();g.TgZ(0,"ion-button",49),g.NdJ("click",function(){return g.CHM(e),g.oxw().openAddressModal()}),g._uU(1,"Add address "),g.qZA()}}const T=[{path:"",component:(()=>{class e{constructor(e,o,i,n,t,s,r){this.userService=e,this.shoppingService=o,this.activatedRoute=i,this.navController=n,this.modalController=t,this.router=s,this.ionicComponentService=r,this.userAuth=!1,this.checkedAddress=!1,this.checkedPayment=!1,this.orderItems=[],this.total=0,this.vat=10,this.fee=15,this.valueTotal=0,console.log(this.router.url,"Current URL")}ngOnInit(){}ionViewWillEnter(){return(0,a.__awaiter)(this,void 0,void 0,function*(){this.userAuth=yield this.userService.isLoggedIn(),this.getCartProduct(),this.getAddress()})}openAddressModal(){return(0,a.__awaiter)(this,void 0,void 0,function*(){return console.log("openModal"),yield(yield this.modalController.create({component:d.A,componentProps:{}})).present()})}editAddressModal(e){return(0,a.__awaiter)(this,void 0,void 0,function*(){return console.log("openModal"),yield(yield this.modalController.create({component:c.k,componentProps:{addressId:e}})).present()})}getAddress(){console.log("______getAddress()"),this.addresses=this.userService.getAddressByUserId()}addressGroupChange(e){console.log("addressGroupChange",e.detail),this.selectAddressId=e.detail.value,this.checkedAddress=!0,console.log("selectAddressId="+this.selectAddressId)}paymentGroupChange(e){console.log("paymentGroupChange",e.detail),this.paymentType=e.detail.value,this.checkedPayment=!0,console.log("checkedPayment = "+this.checkedPayment),console.log("paymentType="+this.paymentType)}getCartProduct(){const e=this.shoppingService.getCart();console.log("page not refresh__________________food-cart : items="+e),this.valueTotal=0;for(const o of e)this.valueTotal+=o.price;this.orderItems=e,console.log("..............Order items ="+JSON.stringify(this.orderItems)),this.total=this.valueTotal,this.subTotal=Number(this.total.toFixed(2)),this.vatTotal=Number((this.subTotal*this.vat/100).toFixed(2)),this.feeTotal=Number((this.fee+this.vatTotal).toFixed(2)),this.grandTotal=Number((this.subTotal+this.feeTotal).toFixed(2))}placeOrder(){this.checkedAddress?(console.log("selectAddressId = "+this.selectAddressId),this.checkedPayment?this.addOrder():this.ionicComponentService.presentAlert("Please choose payment method")):this.ionicComponentService.presentAlert("Please choose address")}addOrder(){return(0,a.__awaiter)(this,void 0,void 0,function*(){console.log("_____call addAddress"),this.ionicComponentService.presentLoading(),this.shoppingService.placeOrder(this.selectAddressId,this.paymentType,this.orderItems,this.grandTotal).then(()=>{console.log("New item added."),this.ionicComponentService.dismissLoading(),this.router.navigateByUrl("/shopping-finish")},e=>{console.log(e),this.ionicComponentService.presentToast(e,3e3),this.ionicComponentService.dismissLoading()})})}}return e.\u0275fac=function(o){return new(o||e)(g.Y36(Z.K),g.Y36(l.s),g.Y36(r.gz),g.Y36(s.SH),g.Y36(s.IN),g.Y36(r.F0),g.Y36(u.d))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-shopping-checkout"]],decls:103,vars:31,consts:[[1,"ion-no-border"],["slot","start"],["routerLink","/shopping-home","routerDirection","root"],["name","close-outline","color","warning"],["color","warning"],["padding",""],["fixed","",1,"ion-no-padding"],["size-lg","8","size-md","12","size-sm","12","size","12"],[1,"checkout-card"],["lines","none"],[1,"main-header5"],["lines","none","class","","lines","none",4,"ngFor","ngForOf"],["lines","none",1,"margin-top-15"],[1,"text-left"],[1,"main-b-header8"],["slot","end","text-right","",1,"main-b-header8"],["lines","none",1,"ion-margin-top"],["value","payment",3,"ionChange"],[1,"ion-padding-top","ion-padding-bottom","margin-top-15"],["slot","start","mode","md","color","warning","value","cc"],["slot","start","size","small","name","card-outline"],[1,"main-header7"],[1,"ion-padding-top","ion-padding-bottom"],["slot","start","mode","md","color","warning","value","paypal"],["slot","start","size","small","name","logo-playstation"],["slot","start","mode","md","color","warning","value","bank"],["slot","start","size","small","name","swap-horizontal-outline"],["slot","start","mode","md","color","warning","value","cash"],["slot","start","size","small","name","wallet-outline"],["size-lg","4","size-md","12","size-sm","12","size","12"],["value","address",3,"ionChange"],["class","ion-padding-top ion-padding-bottom",4,"ngFor","ngForOf"],["color","","fill","blank","expand","full",3,"click",4,"ngIf"],["size","5"],["color","dark"],[1,"main-header8","margin-top-3","margin-bottom-0"],["color","realgreen"],[1,"main-b-header5","margin-top-0"],["size","7"],["color","warning","expand","full",3,"click"],["slot","start","name","checkmark-circle-outline"],["lines","none","lines","none",1,""],[3,"src"],[4,"ngFor","ngForOf"],["slot","end","text-right","",1,"main-header7"],[1,"ion-text-wrap"],["mode","md","color","warning","slot","start",3,"value"],["side","end"],["color","",3,"click"],["color","","fill","blank","expand","full",3,"click"]],template:function(e,o){1&e&&(g.TgZ(0,"ion-header",0),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",1),g.TgZ(3,"ion-button",2),g._UZ(4,"ion-icon",3),g.qZA(),g.qZA(),g.TgZ(5,"ion-title",4),g._uU(6,"Checkout"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"ion-content",5),g.TgZ(8,"ion-grid",6),g.TgZ(9,"ion-row"),g.TgZ(10,"ion-col",7),g.TgZ(11,"ion-card",8),g.TgZ(12,"ion-item",9),g.TgZ(13,"h1",10),g._uU(14,"Order summary"),g.qZA(),g.qZA(),g.TgZ(15,"ion-list"),g.YNc(16,p,14,9,"ion-item",11),g.TgZ(17,"ion-item",12),g.TgZ(18,"ion-label",13),g.TgZ(19,"h1",14),g._uU(20,"Subtotal:"),g.qZA(),g.qZA(),g.TgZ(21,"h1",15),g._uU(22),g.ALo(23,"currency"),g.qZA(),g.qZA(),g.TgZ(24,"ion-item",9),g.TgZ(25,"ion-label",13),g.TgZ(26,"h1",14),g._uU(27),g.qZA(),g.qZA(),g.TgZ(28,"p",15),g._uU(29),g.ALo(30,"currency"),g.qZA(),g.qZA(),g.TgZ(31,"ion-item",9),g.TgZ(32,"ion-label",13),g.TgZ(33,"h1",14),g._uU(34,"Shipping fee:"),g.qZA(),g.qZA(),g.TgZ(35,"h1",15),g._uU(36),g.ALo(37,"currency"),g.qZA(),g.qZA(),g.TgZ(38,"ion-item",16),g.TgZ(39,"ion-label",13),g.TgZ(40,"h1",14),g._uU(41,"GrandTotal:"),g.qZA(),g.qZA(),g.TgZ(42,"h1",15),g._uU(43),g.ALo(44,"currency"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(45,"ion-card",8),g.TgZ(46,"ion-item",9),g.TgZ(47,"h1",10),g._uU(48,"Payment"),g.qZA(),g.qZA(),g.TgZ(49,"ion-radio-group",17),g.NdJ("ionChange",function(e){return o.paymentGroupChange(e)}),g.TgZ(50,"div",18),g.TgZ(51,"ion-item",9),g._UZ(52,"ion-radio",19),g._UZ(53,"ion-icon",20),g.TgZ(54,"ion-label"),g.TgZ(55,"h2",21),g._uU(56,"Credit card"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(57,"div",22),g.TgZ(58,"ion-item",9),g._UZ(59,"ion-radio",23),g._UZ(60,"ion-icon",24),g.TgZ(61,"ion-label"),g.TgZ(62,"h2",21),g._uU(63,"Paypal"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(64,"div",22),g.TgZ(65,"ion-item",9),g._UZ(66,"ion-radio",25),g._UZ(67,"ion-icon",26),g.TgZ(68,"ion-label"),g.TgZ(69,"h2",21),g._uU(70,"Bank tranfer"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(71,"div",22),g.TgZ(72,"ion-item",9),g._UZ(73,"ion-radio",27),g._UZ(74,"ion-icon",28),g.TgZ(75,"ion-label"),g.TgZ(76,"h2",21),g._uU(77,"Cash on delivery"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(78,"ion-col",29),g.TgZ(79,"ion-card",8),g.TgZ(80,"ion-item",9),g.TgZ(81,"h1",10),g._uU(82,"Shipping address"),g.qZA(),g.qZA(),g.TgZ(83,"ion-radio-group",30),g.NdJ("ionChange",function(e){return o.addressGroupChange(e)}),g.YNc(84,m,16,5,"div",31),g.ALo(85,"async"),g.qZA(),g.YNc(86,A,2,0,"ion-button",32),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(87,"ion-footer"),g.TgZ(88,"ion-toolbar"),g.TgZ(89,"ion-grid",6),g.TgZ(90,"ion-row"),g.TgZ(91,"ion-col",33),g.TgZ(92,"ion-text",34),g.TgZ(93,"h1",35),g._uU(94,"Order total price"),g.qZA(),g.qZA(),g.TgZ(95,"ion-text",36),g.TgZ(96,"h1",37),g._uU(97),g.ALo(98,"currency"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(99,"ion-col",38),g.TgZ(100,"ion-button",39),g.NdJ("click",function(){return o.placeOrder()}),g._uU(101," Place order "),g._UZ(102,"ion-icon",40),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(16),g.Q6J("ngForOf",o.orderItems),g.xp6(6),g.Oqu(g.Dn7(23,9,o.total,"USD","symbol")),g.xp6(5),g.hij("Vat(",o.vat,"%):"),g.xp6(2),g.Oqu(g.Dn7(30,13,o.vatTotal,"USD","symbol")),g.xp6(7),g.Oqu(g.Dn7(37,17,o.fee,"USD","symbol")),g.xp6(7),g.Oqu(g.Dn7(44,21,o.grandTotal,"USD","symbol")),g.xp6(41),g.Q6J("ngForOf",g.lcZ(85,25,o.addresses)),g.xp6(2),g.Q6J("ngIf",o.userAuth),g.xp6(11),g.Oqu(g.Dn7(98,27,o.grandTotal,"USD","symbol")))},directives:[s.Gu,s.sr,s.Sm,s.YG,s.YI,r.rH,s.gu,s.wd,s.W2,s.jY,s.Nd,s.wI,s.PM,s.Ie,s.q_,n.sg,s.Q$,s.se,s.QI,s.B7,s.U5,n.O5,s.fr,s.yW,s.Bs,s.Xz,s.td,s.IK,s.u8],pipes:[n.H9,n.Ov],styles:[""]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[r.Bz.forChild(T)],r.Bz]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[n.ez,t.u5,s.Pc,q]]}),e})()}}]);