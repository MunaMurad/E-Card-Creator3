{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { MenuController } from \"@ionic/angular\";\nimport { IonicComponentService } from \"../../services/ionic-component.service\";\nimport { UserService } from \"../../services/user.service\";\nlet FireSigninPage = class FireSigninPage {\n  constructor(router, activatedRoute, menuCtrl, userService, ionicComponentService, //****** form validation ********//\n  formBuilder) {\n    //this.catId = this.activatedRoute.snapshot.paramMap.get('catId');\n    /// console.log(\"CatId=\"+this.catId);\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.menuCtrl = menuCtrl;\n    this.userService = userService;\n    this.ionicComponentService = ionicComponentService;\n    this.formBuilder = formBuilder;\n    this.showPassword = false;\n    let EMAIL_REGEXP = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n    this.loginForm = formBuilder.group({\n      username: [\"\", Validators.compose([Validators.minLength(3), Validators.required])],\n      password: [\"\", Validators.compose([Validators.required])]\n    });\n  }\n\n  ngOnInit() {\n    this.redirectUrl = this.activatedRoute.snapshot.queryParamMap.get(\"redirectUrl\"); // const secondParam: string = this.route.snapshot.queryParamMap.get('secondParamKey');\n\n    console.log(\"redirectUrl=\" + this.redirectUrl);\n  }\n\n  submitFormTest() {\n    if (!this.loginForm.valid) {\n      console.log(this.loginForm.value);\n      console.log(\"invalid form\");\n    } else {\n      console.log(this.loginForm.value);\n      console.log(\"yes, \");\n    }\n  }\n\n  register() {\n    if (this.redirectUrl) {\n      this.router.navigateByUrl(\"/fire-signup?redirectUrl=\" + this.redirectUrl);\n    } else {\n      this.router.navigateByUrl(\"/fire-signup\");\n    }\n  }\n\n  forgot() {\n    this.router.navigateByUrl(\"/fire-forgot\");\n  }\n\n  login() {\n    if (!this.loginForm.valid) {\n      console.log(this.loginForm.value); //this.presentAlert(\"invalid form\");\n\n      console.log(\"invalid form\");\n    } else {\n      this.ionicComponentService.presentLoading();\n      console.log(this.loginForm.value);\n      console.log(\"yes, \");\n      this.userService.signinUser(this.loginForm.value.username, this.loginForm.value.password).then(authData => {\n        console.log(\"Auth pass\");\n        this.ionicComponentService.dismissLoading();\n\n        if (this.redirectUrl) {\n          this.router.navigateByUrl(\"/\" + this.redirectUrl);\n        } else {\n          this.router.navigateByUrl(\"/start\");\n        }\n      }, error => {\n        //var errorMessage: string = error.message;\n        this.ionicComponentService.dismissLoading();\n        console.log(\"Error:\" + error.message);\n        this.ionicComponentService.presentAlert(error.message);\n      });\n    }\n  } //####### Show / hide password #######//\n\n\n  onPasswordToggle() {\n    this.showPassword = !this.showPassword;\n  }\n\n};\nFireSigninPage = __decorate([Component({\n  selector: \"app-fire-signin\",\n  templateUrl: \"./fire-signin.page.html\",\n  styleUrls: [\"./fire-signin.page.scss\"]\n}), __metadata(\"design:paramtypes\", [Router, ActivatedRoute, MenuController, UserService, IonicComponentService, FormBuilder])], FireSigninPage);\nexport { FireSigninPage };","map":null,"metadata":{},"sourceType":"module"}