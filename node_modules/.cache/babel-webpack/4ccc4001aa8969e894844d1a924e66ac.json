{"ast":null,"code":"import { EncryptionService } from './encryption.service';\nimport { InvitationDetails } from '../congratspages/image-editor/InvitationDetails';\nimport { NavController } from \"@ionic/angular\";\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\nimport * as firebase from 'firebase';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { UserService } from './user.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/firestore\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"./user.service\";\nimport * as i4 from \"./encryption.service\";\nimport * as i5 from \"@angular/fire/auth\";\nexport let QrService = /*#__PURE__*/(() => {\n  class QrService {\n    constructor(firestore, navCtrl, userService, encryptionService, fireAuth) {\n      this.firestore = firestore;\n      this.navCtrl = navCtrl;\n      this.userService = userService;\n      this.encryptionService = encryptionService;\n      this.fireAuth = fireAuth;\n      this.userId = userService.getUserId();\n      this.invitationsCollection = this.firestore.collection('InvitationDetails');\n    } //*******************************//\n    //****** Get all places *********//\n    //*******************************//\n    // Get Latest DocId from DB and insert the rest of the details\n\n\n    InsertInvitationQRCodeInDb(data) {\n      data.UserId = this.userId != '' ? this.userId : 'a';\n      var invitation = new InvitationDetails();\n      invitation.EventName = data.EventName;\n      invitation.UserId = data.UserId;\n      invitation.AttendeesAllowed = data.AttendeesCount;\n      invitation.AttendeesCount = 0;\n      const createdAt = firebase.firestore.FieldValue.serverTimestamp();\n      var result;\n      console.log(\"invitation\", invitation);\n      this.invitationsCollection.add(invitation).then(function (docRef) {\n        result = docRef.id;\n      }).catch(function (error) {\n        console.error(\"Error adding document: \", error);\n      });\n      return this.encryptionService.Encrypt(result); //return result;\n    }\n\n    Clear(EncryptedDetails) {\n      this.createCode = this.qrData;\n    }\n\n  }\n\n  QrService.ɵfac = function QrService_Factory(t) {\n    return new (t || QrService)(i0.ɵɵinject(i1.AngularFirestore), i0.ɵɵinject(i2.NavController), i0.ɵɵinject(i3.UserService), i0.ɵɵinject(i4.EncryptionService), i0.ɵɵinject(i5.AngularFireAuth));\n  };\n\n  QrService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: QrService,\n    factory: QrService.ɵfac,\n    providedIn: \"root\"\n  });\n  return QrService;\n})();","map":null,"metadata":{},"sourceType":"module"}