{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { NavController, ModalController } from '@ionic/angular';\nimport { UserService } from '../../../services/user.service';\nimport { FoodService } from '../../../services/food.service';\nimport { IonicComponentService } from '../../../services/ionic-component.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/user.service\";\nimport * as i2 from \"../../../services/food.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"../../../services/ionic-component.service\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/common\";\n\nfunction FoodAddressEditPage_p_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵelementStart(1, \"ion-text\", 16);\n    i0.ɵɵelement(2, \"ion-icon\", 17);\n    i0.ɵɵtext(3, \" Address label field must be at least 3 characters long!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FoodAddressEditPage_p_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵelementStart(1, \"ion-text\", 16);\n    i0.ɵɵelement(2, \"ion-icon\", 17);\n    i0.ɵɵtext(3, \" Fullname field must be at least 3 characters long!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FoodAddressEditPage_p_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵelementStart(1, \"ion-text\", 16);\n    i0.ɵɵelement(2, \"ion-icon\", 17);\n    i0.ɵɵtext(3, \" Phone number field must be at least 3 characters long!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FoodAddressEditPage_p_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵelementStart(1, \"ion-text\", 16);\n    i0.ɵɵelement(2, \"ion-icon\", 17);\n    i0.ɵɵtext(3, \" Address field must be at least 3 characters long!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let FoodAddressEditPage = /*#__PURE__*/(() => {\n  class FoodAddressEditPage {\n    constructor(userService, foodService, activatedRoute, navController, router, modalController, //public alertController: AlertController,\n    ionicComponentService, formBuilder) {\n      this.userService = userService;\n      this.foodService = foodService;\n      this.activatedRoute = activatedRoute;\n      this.navController = navController;\n      this.router = router;\n      this.modalController = modalController;\n      this.ionicComponentService = ionicComponentService;\n      this.formBuilder = formBuilder;\n      this.addressId = this.activatedRoute.snapshot.paramMap.get('addressId');\n      this.addressForm = this.formBuilder.group({\n        label: ['', Validators.required],\n        fullname: ['', Validators.required],\n        phone: ['', [Validators.required, Validators.minLength(6)]],\n        address: ['', Validators.required]\n      });\n    }\n\n    ngOnInit() {\n      //this.address = this.userService.getAddressById(this.addressId);\n      this.userService.getAddressById(this.addressId).subscribe(res => {\n        console.log(\"----->actionArray=\" + res);\n        console.log(\"Get user profile response=\" + res);\n        this.addressForm.get('label').setValue(res.label);\n        this.addressForm.get('fullname').setValue(res.fullname);\n        this.addressForm.get('phone').setValue(res.phone);\n        this.addressForm.get('address').setValue(res.address); //this.addressArray = res;\n      });\n    }\n\n    close() {\n      return __awaiter(this, void 0, void 0, function* () {\n        yield this.modalController.dismiss();\n      });\n    } // openMap(categoryId) {\n    //   console.log(\"openMap\");\n    //   this.modalController.create({\n    //     component: TravelMapPage,\n    //     componentProps: {\n    //       categoryId: categoryId\n    //     }\n    //   }).then(modal => {\n    //     modal.present();\n    //   });\n    // }\n\n\n    editAddress() {\n      return __awaiter(this, void 0, void 0, function* () {\n        // console.log(\"userProfileId=\"+this.userService.getUserId());\n        console.log(\"_____call addAddress\");\n\n        if (!this.addressForm.valid) {\n          console.log(this.addressForm.value);\n          console.log(\"____addressForm invalid \"); //this.presentAlert(\"invalid form\");\n        } else {\n          console.log(this.addressForm.value);\n          this.ionicComponentService.presentLoading();\n          yield this.userService.editAddress(this.addressId, this.addressForm.value.label, this.addressForm.value.fullname, this.addressForm.value.phone, this.addressForm.value.address).then(() => {\n            this.ionicComponentService.dismissLoading();\n            this.close(); //this.router.navigateByUrl('/food-address');\n          }, error => {\n            var errorMessage = error.message;\n            console.log(\"ERROR:\" + errorMessage);\n            this.ionicComponentService.dismissLoading();\n            this.ionicComponentService.presentToast(errorMessage, 4000);\n            this.close();\n          });\n        }\n      });\n    }\n\n    delAddress() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.ionicComponentService.presentLoading();\n        yield this.userService.deleteAddress(this.addressId).then(() => {\n          // call loading \n          this.ionicComponentService.dismissLoading();\n          this.close(); //this.router.navigateByUrl('/food-address');\n        }, error => {\n          var errorMessage = error.message;\n          console.log(\"ERROR:\" + errorMessage);\n          this.ionicComponentService.dismissLoading();\n          this.ionicComponentService.presentToast(errorMessage, 4000);\n          this.close();\n        });\n      });\n    }\n\n  }\n\n  FoodAddressEditPage.ɵfac = function FoodAddressEditPage_Factory(t) {\n    return new (t || FoodAddressEditPage)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.FoodService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.NavController), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ModalController), i0.ɵɵdirectiveInject(i5.IonicComponentService), i0.ɵɵdirectiveInject(i6.FormBuilder));\n  };\n\n  FoodAddressEditPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FoodAddressEditPage,\n    selectors: [[\"app-food-address-edit\"]],\n    decls: 36,\n    vars: 6,\n    consts: [[1, \"ion-no-border\"], [\"color\", \"success\", 1, \"main-header6\"], [\"no-padding\", \"\"], [1, \"ion-margin\", \"ion-padding-top\"], [\"novalidate\", \"\", 3, \"formGroup\"], [\"lines\", \"\"], [\"position\", \"stacked\"], [\"type\", \"text\", \"formControlName\", \"label\"], [\"type\", \"text\", \"formControlName\", \"fullname\"], [\"type\", \"number\", \"formControlName\", \"phone\"], [\"formControlName\", \"address\", \"rows\", \"6\", \"auto-grow\", \"true\"], [\"color\", \"danger\", 4, \"ngIf\"], [\"color\", \"success\", \"expand\", \"full\", 3, \"disabled\", \"click\"], [\"color\", \"danger\", \"expand\", \"full\", \"fill\", \"blank\", 3, \"click\"], [\"color\", \"dark\", \"fill\", \"blank\", \"expand\", \"full\", 3, \"click\"], [\"color\", \"danger\"], [\"color\", \"warning\"], [\"name\", \"information-circle-outline\"]],\n    template: function FoodAddressEditPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0);\n        i0.ɵɵelementStart(1, \"ion-toolbar\");\n        i0.ɵɵelementStart(2, \"ion-title\", 1);\n        i0.ɵɵtext(3, \"Edit address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-content\", 2);\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵelementStart(6, \"form\", 4);\n        i0.ɵɵelementStart(7, \"ion-list\", 5);\n        i0.ɵɵelementStart(8, \"ion-item\");\n        i0.ɵɵelementStart(9, \"ion-label\", 6);\n        i0.ɵɵtext(10, \"Address label\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"ion-input\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"ion-item\");\n        i0.ɵɵelementStart(13, \"ion-label\", 6);\n        i0.ɵɵtext(14, \"Fullname\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"ion-input\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-item\");\n        i0.ɵɵelementStart(17, \"ion-label\", 6);\n        i0.ɵɵtext(18, \"Phone number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"ion-input\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"ion-item\");\n        i0.ɵɵelementStart(21, \"ion-label\", 6);\n        i0.ɵɵtext(22, \"Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"ion-textarea\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(24, FoodAddressEditPage_p_24_Template, 4, 0, \"p\", 11);\n        i0.ɵɵtemplate(25, FoodAddressEditPage_p_25_Template, 4, 0, \"p\", 11);\n        i0.ɵɵtemplate(26, FoodAddressEditPage_p_26_Template, 4, 0, \"p\", 11);\n        i0.ɵɵtemplate(27, FoodAddressEditPage_p_27_Template, 4, 0, \"p\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"ion-footer\");\n        i0.ɵɵelementStart(29, \"ion-toolbar\");\n        i0.ɵɵelementStart(30, \"ion-button\", 12);\n        i0.ɵɵlistener(\"click\", function FoodAddressEditPage_Template_ion_button_click_30_listener() {\n          return ctx.editAddress();\n        });\n        i0.ɵɵtext(31, \"Update\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"ion-button\", 13);\n        i0.ɵɵlistener(\"click\", function FoodAddressEditPage_Template_ion_button_click_32_listener() {\n          return ctx.delAddress();\n        });\n        i0.ɵɵtext(33, \"Delete\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"ion-button\", 14);\n        i0.ɵɵlistener(\"click\", function FoodAddressEditPage_Template_ion_button_click_34_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵtext(35, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.addressForm);\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngIf\", !ctx.addressForm.controls.label.valid && ctx.addressForm.controls.label.touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.addressForm.controls.fullname.valid && ctx.addressForm.controls.fullname.touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.addressForm.controls.phone.valid && ctx.addressForm.controls.phone.touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.addressForm.controls.address.valid && ctx.addressForm.controls.address.touched);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", !ctx.addressForm.valid);\n      }\n    },\n    directives: [i4.IonHeader, i4.IonToolbar, i4.IonTitle, i4.IonContent, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.FormGroupDirective, i4.IonList, i4.IonItem, i4.IonLabel, i4.IonInput, i4.TextValueAccessor, i6.NgControlStatus, i6.FormControlName, i4.NumericValueAccessor, i4.IonTextarea, i7.NgIf, i4.IonFooter, i4.IonButton, i4.IonText, i4.IonIcon],\n    styles: [\"\"]\n  });\n  return FoodAddressEditPage;\n})();","map":null,"metadata":{},"sourceType":"module"}