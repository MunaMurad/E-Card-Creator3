{"ast":null,"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ModalController, AlertController, NavController } from '@ionic/angular';\nimport { RadioService } from '../../../services/radio.service';\nimport { IonicComponentService } from '../../../services/ionic-component.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/radio.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"../../../services/ionic-component.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction RadioPlayerPage_ion_button_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-button\", 15);\n    i0.ɵɵlistener(\"click\", function RadioPlayerPage_ion_button_22_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n\n      const _r0 = i0.ɵɵreference(20);\n\n      return ctx_r3.play(_r0.value);\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 16);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction RadioPlayerPage_ion_button_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-button\", 15);\n    i0.ɵɵlistener(\"click\", function RadioPlayerPage_ion_button_23_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.pause();\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 17);\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"background-image\": a0\n  };\n};\n\nlet RadioPlayerPage = class RadioPlayerPage {\n  constructor(radioService, activatedRoute, navController, modalController, router, alertController, ionicComponentService) {\n    this.radioService = radioService;\n    this.activatedRoute = activatedRoute;\n    this.navController = navController;\n    this.modalController = modalController;\n    this.router = router;\n    this.alertController = alertController;\n    this.ionicComponentService = ionicComponentService;\n    this.playing = false;\n    this.radioId = this.activatedRoute.snapshot.paramMap.get('radioId'); // this.radio = afDB.object('/radio/'+this.radioId ).valueChanges();\n    // this.radio.subscribe( (snapshots) => {\n    //   this.stationUrl = snapshots.url;    \n    //   console.log(\"station url =\"+this.stationUrl )\n    //   this.player = myplayer;\n    //   this.play(this.stationUrl);\n    // });\n  }\n\n  ngOnInit() {\n    console.log(\"radioId=\" + this.radioId); // radio station list : http://www.radiosure.com/stations/\n\n    this.radioDetail = this.radioService.getStationDetail(this.radioId);\n    this.radioService.getStationDetail(this.radioId).subscribe(res => {\n      console.log(\"stationTitle =\" + this.stationTitle);\n      console.log(\"stationFq=\" + this.stationFq);\n      console.log(\"stationUrl =\" + this.stationUrl);\n      this.stationTitle = res.title;\n      this.stationFq = res.fq;\n      this.stationUrl = res.url;\n      console.log(\"stationTitle =\" + this.stationTitle);\n      console.log(\"stationFq=\" + this.stationFq);\n      console.log(\"stationUrl =\" + this.stationUrl); // call play()\n\n      this.play(this.stationUrl);\n    });\n  }\n\n  ionViewWillEnter() {\n    return __awaiter(this, void 0, void 0, function* () {});\n  }\n\n  ionViewDidLeave() {\n    this.stop();\n  } // async presentLoading() {\n  //   this.isLoading = true;\n  //   return await this.loadingController.create({\n  //     duration: 5000,\n  //   }).then(a => {\n  //     a.present().then(() => {\n  //       console.log('presented');\n  //       if (!this.isLoading) {\n  //         a.dismiss().then(() => console.log('abort presenting'));\n  //       }\n  //     });\n  //   });\n  // }\n  // async dismissLoading() {\n  //   this.isLoading = false;\n  //   return await this.loadingController.dismiss().then(() => console.log('dismissed'));\n  // }\n\n\n  play(url) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // const loading = await this.loadingController.create({\n      //   spinner: \"dots\",\n      //   duration: 5000,\n      //   message: 'Please wait...',\n      //   translucent: true,\n      //   cssClass: 'custom-class custom-loading'\n      // });\n      //  await loading.present();\n      this.ionicComponentService.presentLoading();\n      console.log(\"play button clicked\");\n      console.log(\"radio station url=\" + url); //await  loading.onDidDismiss();\n\n      this.playing = !this.playing;\n      this.radioService.play(url).then(() => {\n        console.log('Return Playing');\n        this.ionicComponentService.dismissLoading(); ///this.loadingPopup.dismiss();  \n      }).catch(error => {\n        console.log(\"error=\" + error);\n        this.ionicComponentService.presentAlert(\"Error msg= \" + error + \"<br>Radio url = \" + url);\n        this.radioService.stop();\n        this.playing = false;\n        this.ionicComponentService.dismissLoading();\n      });\n    });\n  }\n\n  pause() {\n    this.playing = !this.playing;\n    this.radioService.pause();\n  }\n\n  stop() {\n    this.radioService.stop();\n  }\n\n  close() {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.modalController.dismiss();\n    });\n  }\n\n};\n\nRadioPlayerPage.ɵfac = function RadioPlayerPage_Factory(t) {\n  return new (t || RadioPlayerPage)(i0.ɵɵdirectiveInject(i1.RadioService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.NavController), i0.ɵɵdirectiveInject(i3.ModalController), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AlertController), i0.ɵɵdirectiveInject(i4.IonicComponentService));\n};\n\nRadioPlayerPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RadioPlayerPage,\n  selectors: [[\"app-radio-player\"]],\n  decls: 24,\n  vars: 19,\n  consts: [[1, \"ion-no-border\"], [1, \"first\"], [\"slot\", \"end\"], [3, \"click\"], [\"color\", \"light\", \"name\", \"close-circle-outline\", 1, \"close\"], [\"fullscreen\", \"true\"], [1, \"profile-header\", 3, \"ngStyle\"], [1, \"profile\"], [1, \"profile-box\"], [1, \"profile-image\", 3, \"src\"], [\"padding-top\", \"\", 1, \"ion-margin-top\", \"main-b-header6\", \"description\"], [\"padding-top\", \"\", 1, \"description\"], [\"type\", \"text\", 2, \"display\", \"none\", 3, \"value\"], [\"dummy\", \"\"], [\"fill\", \"clear\", 3, \"click\", 4, \"ngIf\"], [\"fill\", \"clear\", 3, \"click\"], [\"color\", \"light\", \"name\", \"play\", 1, \"player\"], [\"color\", \"light\", \"name\", \"pause\", 1, \"player\"]],\n  template: function RadioPlayerPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\", 0);\n      i0.ɵɵelementStart(1, \"ion-toolbar\", 1);\n      i0.ɵɵelementStart(2, \"ion-buttons\", 2);\n      i0.ɵɵelementStart(3, \"ion-button\", 3);\n      i0.ɵɵlistener(\"click\", function RadioPlayerPage_Template_ion_button_click_3_listener() {\n        return ctx.close();\n      });\n      i0.ɵɵelement(4, \"ion-icon\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-content\", 5);\n      i0.ɵɵelement(6, \"div\", 6);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵelementStart(9, \"div\", 8);\n      i0.ɵɵelement(10, \"ion-img\", 9);\n      i0.ɵɵpipe(11, \"async\");\n      i0.ɵɵelementStart(12, \"h3\", 10);\n      i0.ɵɵtext(13);\n      i0.ɵɵpipe(14, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"p\", 11);\n      i0.ɵɵtext(16);\n      i0.ɵɵpipe(17, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\");\n      i0.ɵɵelement(19, \"input\", 12, 13);\n      i0.ɵɵpipe(21, \"async\");\n      i0.ɵɵtemplate(22, RadioPlayerPage_ion_button_22_Template, 2, 0, \"ion-button\", 14);\n      i0.ɵɵtemplate(23, RadioPlayerPage_ion_button_23_Template, 2, 0, \"ion-button\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      let tmp_0_0;\n      let tmp_1_0;\n      let tmp_2_0;\n      let tmp_3_0;\n      let tmp_4_0;\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(17, _c0, \"url(\" + ((tmp_0_0 = i0.ɵɵpipeBind1(7, 7, ctx.radioDetail)) == null ? null : tmp_0_0.image) + \")\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"src\", (tmp_1_0 = i0.ɵɵpipeBind1(11, 9, ctx.radioDetail)) == null ? null : tmp_1_0.image);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate((tmp_2_0 = i0.ɵɵpipeBind1(14, 11, ctx.radioDetail)) == null ? null : tmp_2_0.title);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate((tmp_3_0 = i0.ɵɵpipeBind1(17, 13, ctx.radioDetail)) == null ? null : tmp_3_0.description);\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"value\", (tmp_4_0 = i0.ɵɵpipeBind1(21, 15, ctx.radioDetail)) == null ? null : tmp_4_0.url);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.playing);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.playing);\n    }\n  },\n  directives: [i3.IonHeader, i3.IonToolbar, i3.IonButtons, i3.IonButton, i3.IonIcon, i3.IonContent, i5.NgStyle, i3.IonImg, i5.NgIf],\n  pipes: [i5.AsyncPipe],\n  styles: [\".scroll-content[_ngcontent-%COMP%]{margin-top:0!important}ion-toolbar.first[_ngcontent-%COMP%]{--background: transparent;--ion-color-base: transparent !important}.profile-header[_ngcontent-%COMP%]:before{content:\\\" \\\";position:absolute;left:0;right:0;top:0;bottom:0;background:linear-gradient(to bottom,rgba(0,0,0,.42) 0%,rgba(0,0,0,.42) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\\\"#6b000000\\\",endColorstr=\\\"#6b000000\\\",GradientType=0)}.profile-header[_ngcontent-%COMP%]{position:relative;height:30vh;background-size:cover;background-position:center;background-repeat:no-repeat;-moz-filter:blur(25px);-o-filter:blur(25px);-ms-filter:blur(25px);filter:blur(25px);transform:scale(1.5);transform:scale(4.1)}.profile-box[_ngcontent-%COMP%]{position:absolute;padding:30px!important;top:20%;width:100%;z-index:2;text-align:center}.profile-image[_ngcontent-%COMP%]{width:200px;height:200px;margin:0 auto;border-width:3px;border-style:solid;border-color:#fff;-o-border-image:none;border-image:none;-o-border-image:initial;border-image:initial;background-color:#fff;border-radius:5px}ion-icon.player[_ngcontent-%COMP%]{font-size:60px}.title[_ngcontent-%COMP%]{text-shadow:1px 1px 2px #666;color:#fff}.description[_ngcontent-%COMP%]{padding-top:0;margin-top:10px;color:#fff;text-shadow:1px 1px 2px #666!important}.player[_ngcontent-%COMP%]{color:#fff;text-shadow:1px 1px 2px #666!important}ion-icon.close[_ngcontent-%COMP%]{font-size:30px}\"]\n});\nRadioPlayerPage = __decorate([Component({\n  selector: 'app-radio-player',\n  templateUrl: './radio-player.page.html',\n  styleUrls: ['./radio-player.page.scss']\n}), __metadata(\"design:paramtypes\", [RadioService, ActivatedRoute, NavController, ModalController, Router, AlertController, IonicComponentService])], RadioPlayerPage);\nexport { RadioPlayerPage };","map":null,"metadata":{},"sourceType":"module"}