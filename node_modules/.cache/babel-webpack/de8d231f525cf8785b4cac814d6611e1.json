{"ast":null,"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { MenuController, NavController } from '@ionic/angular';\nimport { IonicComponentService } from '../../services/ionic-component.service';\nimport { UserService } from '../../services/user.service';\nlet FireProfilePage = class FireProfilePage {\n  constructor(userService, menuCtrl, navController, router, ionicComponentService, //private modalController: ModalController\n  formBuilder) {\n    this.userService = userService;\n    this.menuCtrl = menuCtrl;\n    this.navController = navController;\n    this.router = router;\n    this.ionicComponentService = ionicComponentService;\n    this.formBuilder = formBuilder;\n    this.userAuth = false; // Is user logged in ?\n\n    let EMAIL_REGEXP = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/; // Tips: If you can't bind to 'formGroup' since it isn't a known property of 'form'.\n    //  ******Don't forgot to import FormsModule and ReactiveFormsModule into your <page-name>.module.ts and then add them to the imports array.\n    // https://stackoverflow.com/questions/39152071/cant-bind-to-formgroup-since-it-isnt-a-known-property-of-form\n    // https://stackoverflow.com/questions/53130244/cant-bind-to-formgroup-in-angular-7\n\n    this.updateForm = formBuilder.group({\n      firstname: ['', Validators.compose([Validators.minLength(3), Validators.required])],\n      lastname: ['', Validators.compose([Validators.minLength(3), Validators.required])],\n      email: ['', Validators.compose([Validators.minLength(0), Validators.required])],\n      phone: ['', Validators.compose([Validators.minLength(0), Validators.required])]\n    });\n  }\n\n  ngOnInit() {\n    //this.ionicComponentService.presentLoading(); // call loading \n    this.ionicComponentService.presentTimeoutLoading(1000, true);\n  }\n\n  ionViewWillEnter() {\n    this.userDetail = this.userService.getUserProfile(); //this.userAuth =  await this.userService.isLoggedIn();\n\n    this.userService.getUserProfile().subscribe(res => {\n      console.log(\"Get user profile response=\" + res);\n    });\n  }\n\n  updateProfile() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!this.updateForm.valid) {\n        console.log(\"no valid\");\n        console.log(this.updateForm.value); //this.presentAlert(\"invalid form\");\n      } else {\n        // console.log(\"itemId=\"+this.itemId);\n        // add to firebase\n        this.ionicComponentService.presentLoading();\n        console.log(\"YES\");\n        yield this.userService.updateUserProfile(this.updateForm.value.firstname, this.updateForm.value.lastname, this.updateForm.value.phone, this.updateForm.value.email).then(() => {\n          this.ionicComponentService.presentToast(\"Profile updated\", 2000);\n          this.ionicComponentService.dismissLoading(); //this.router.navigateByUrl('fire-profile');\n          //this.nav.setRoot('AfterLoginPage');\n        }, error => {\n          var errorMessage = error.message;\n          this.ionicComponentService.dismissLoading();\n          this.ionicComponentService.presentAlert(errorMessage);\n        }); //this.firestore.doc('item/'+this.itemId).update(postData);\n        //this.router.navigateByUrl('crud-item');    \n      }\n    });\n  }\n\n  logout() {\n    return __awaiter(this, void 0, void 0, function* () {\n      //  this.userService.signoutUser();\n      //  this.router.navigateByUrl('/side-menu/travel/tabs/tab1');\n      yield this.userService.signoutUser().then(() => {\n        console.log(\"LOGOUT\");\n        this.ionicComponentService.presentTimeoutLoading(1000, true);\n        this.ionicComponentService.presentToastWithOptions(\"Notification\", \"notifications-outline\", \"\", \"You are logged out\", \"top\", 9000); //this.ionicComponentService.presentToast(\"Logout\",1000);\n\n        this.router.navigateByUrl('fire-signin'); //loadingPopup.dismiss();\n        //this.nav.setRoot('AfterLoginPage');\n      }, error => {\n        var errorMessage = error.message;\n        this.ionicComponentService.presentToast(errorMessage, 3000);\n        console.log(\"ERROR:\" + errorMessage); //loadingPopup.dismiss();\n        //this.presentAlert(errorMessage);      \n      });\n    });\n  }\n\n};\nFireProfilePage = __decorate([Component({\n  selector: 'app-fire-profile',\n  templateUrl: './fire-profile.page.html',\n  styleUrls: ['./fire-profile.page.scss']\n}), __metadata(\"design:paramtypes\", [UserService, MenuController, NavController, Router, IonicComponentService, FormBuilder])], FireProfilePage);\nexport { FireProfilePage };","map":null,"metadata":{},"sourceType":"module"}