{"ast":null,"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { MenuController } from '@ionic/angular';\nimport { UserService } from '../../services/user.service';\nimport { IonicComponentService } from '../../services/ionic-component.service';\nlet FireSignupPage = class FireSignupPage {\n  constructor(router, activatedRoute, menuCtrl, userService, ionicComponentService, //****** form validation ********//\n  formBuilder) {\n    //this.catId = this.activatedRoute.snapshot.paramMap.get('catId');\n    /// console.log(\"CatId=\"+this.catId);\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.menuCtrl = menuCtrl;\n    this.userService = userService;\n    this.ionicComponentService = ionicComponentService;\n    this.formBuilder = formBuilder;\n    this.showPassword = false;\n    let EMAIL_REGEXP = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/; // this.registerForm = fb.group({\n    //let Email_Val =     /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/\n    // this.registerForm = fb.group({\n    //       email: ['', Validators.compose([Validators.required, Validators.pattern(EMAIL_REGEXP)])],\n    //       profileName: ['', Validators.compose([Validators.minLength(2), Validators.required])],\n    //       phone: ['', Validators.compose([Validators.minLength(6), Validators.required])],\n    //       password: ['', Validators.compose([Validators.minLength(6), Validators.required])],\n    // });\n    // Tips: If you can't bind to 'formGroup' since it isn't a known property of 'form'.\n    //  ******Don't forgot to import FormsModule and ReactiveFormsModule into your <page-name>.module.ts and then add them to the imports array.\n    // https://stackoverflow.com/questions/39152071/cant-bind-to-formgroup-since-it-isnt-a-known-property-of-form\n    // https://stackoverflow.com/questions/53130244/cant-bind-to-formgroup-in-angular-7\n\n    this.registerForm = formBuilder.group({\n      firstname: ['', Validators.compose([Validators.minLength(3), Validators.required])],\n      lastname: ['', Validators.compose([Validators.minLength(3), Validators.required])],\n      phone: ['', Validators.compose([Validators.minLength(2), Validators.required])],\n      username: ['', Validators.compose([Validators.required, Validators.pattern(EMAIL_REGEXP)])],\n      password: ['', Validators.compose([Validators.minLength(6), Validators.required])] //['', Validators.compose([Validators.required])]\n\n    });\n  }\n\n  ngOnInit() {\n    this.redirectUrl = this.activatedRoute.snapshot.queryParamMap.get('redirectUrl'); // const secondParam: string = this.route.snapshot.queryParamMap.get('secondParamKey');\n\n    console.log(\"redirectUrl=\" + this.redirectUrl);\n  }\n\n  submitFormTest() {\n    if (!this.registerForm.valid) {\n      console.log(this.registerForm.value); //this.presentAlert(\"invalid form\");\n\n      console.log(\"invalid form\");\n    } else {\n      console.log(this.registerForm.value);\n      console.log(\"yes, \"); //this.userService.loginUser()\n    }\n  } /// old way ////\n\n\n  registerUser() {\n    return __awaiter(this, void 0, void 0, function* () {\n      console.log(\"call signopUser\");\n\n      if (!this.registerForm.valid) {\n        console.log(this.registerForm.value);\n        console.log(\"invalid form\"); //this.presentAlert(\"invalid form\");\n      } else {\n        this.ionicComponentService.presentLoading();\n        console.log(this.registerForm.value);\n        console.log(\"yes, \");\n        yield this.userService.signupUser(this.registerForm.value.firstname, this.registerForm.value.lastname, this.registerForm.value.phone, this.registerForm.value.username, this.registerForm.value.password).then(() => {\n          this.ionicComponentService.dismissLoading();\n\n          if (this.redirectUrl) {\n            this.router.navigateByUrl('/' + this.redirectUrl);\n          } else {\n            this.router.navigateByUrl('/walkthrough');\n          } //this.router.navigateByUrl('/side-menu/travel/tabs/tab1');\n          //loadingPopup.dismiss();\n          //this.nav.setRoot('AfterLoginPage');\n\n        }, error => {\n          var errorMessage = error.message;\n          this.ionicComponentService.dismissLoading();\n          this.ionicComponentService.presentAlert(errorMessage);\n        });\n      }\n    });\n  } //####### Show / hide password #######//\n\n\n  onPasswordToggle() {\n    this.showPassword = !this.showPassword;\n  }\n\n};\nFireSignupPage = __decorate([Component({\n  selector: 'app-fire-signup',\n  templateUrl: './fire-signup.page.html',\n  styleUrls: ['./fire-signup.page.scss']\n}), __metadata(\"design:paramtypes\", [Router, ActivatedRoute, MenuController, UserService, IonicComponentService, FormBuilder])], FireSignupPage);\nexport { FireSignupPage };","map":null,"metadata":{},"sourceType":"module"}