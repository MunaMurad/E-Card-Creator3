!function(){"use strict";function e(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==o.return||o.return()}finally{if(l)throw a}}}}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(self.webpackChunkionic5fullapp_final=self.webpackChunkionic5fullapp_final||[]).push([[4465],{74465:function(n,i,r){r.r(i),r.d(i,{FoodCheckoutPageModule:function(){return b}});var a=r(38583),s=r(3679),l=r(52462),c=r(17410),d=r(64762),u=r(3236),g=r(74936),Z=r(62272),h=r(73071),p=r(29785),m=r(67092);function f(e,n){if(1&e&&(Z.TgZ(0,"span"),Z._uU(1),Z.qZA()),2&e){var t=n.$implicit;Z.xp6(1),Z.hij("",t.name," \xa0")}}function A(e,n){if(1&e&&(Z.TgZ(0,"ion-item",41),Z.TgZ(1,"ion-thumbnail",1),Z._UZ(2,"ion-img",42),Z.qZA(),Z.TgZ(3,"ion-label",13),Z.TgZ(4,"h3"),Z._uU(5),Z.qZA(),Z.TgZ(6,"p"),Z._uU(7),Z.qZA(),Z.TgZ(8,"p"),Z._uU(9," Addon: "),Z.YNc(10,f,2,1,"span",43),Z.qZA(),Z.qZA(),Z.TgZ(11,"h5",44),Z._uU(12),Z.ALo(13,"currency"),Z.qZA(),Z.qZA()),2&e){var t=n.$implicit;Z.xp6(2),Z.Q6J("src",t.image),Z.xp6(3),Z.Oqu(t.name),Z.xp6(2),Z.hij("Size: ",t.size,""),Z.xp6(3),Z.Q6J("ngForOf",t.addOn),Z.xp6(2),Z.hij(" ",Z.Dn7(13,5,t.price,"USD","symbol")," ")}}function T(e,n){if(1&e){var t=Z.EpF();Z.TgZ(0,"div",22),Z.TgZ(1,"ion-item-sliding"),Z.TgZ(2,"ion-item",9),Z.TgZ(3,"ion-label"),Z.TgZ(4,"p"),Z._uU(5),Z.qZA(),Z.TgZ(6,"h3"),Z._uU(7),Z.qZA(),Z.TgZ(8,"h3",45),Z._uU(9),Z.qZA(),Z.TgZ(10,"h3"),Z._uU(11),Z.qZA(),Z.qZA(),Z._UZ(12,"ion-radio",46),Z.qZA(),Z.TgZ(13,"ion-item-options",47),Z.TgZ(14,"ion-item-option",48),Z.NdJ("click",function(){var e=Z.CHM(t).$implicit;return Z.oxw().editAddressModal(e.id)}),Z._uU(15,"Edit"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()}if(2&e){var o=n.$implicit;Z.xp6(5),Z.Oqu(o.label),Z.xp6(2),Z.Oqu(o.fullname),Z.xp6(2),Z.Oqu(o.address),Z.xp6(2),Z.Oqu(o.phone),Z.xp6(1),Z.Q6J("value",o.id)}}function v(e,n){if(1&e){var t=Z.EpF();Z.TgZ(0,"ion-button",49),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw().openAddressModal()}),Z._uU(1,"Add address "),Z.qZA()}}var q,_=[{path:"",component:(q=function(){function n(e,o,i,r,a,s,l){t(this,n),this.userService=e,this.foodService=o,this.activatedRoute=i,this.navController=r,this.modalController=a,this.router=s,this.ionicComponentService=l,this.userAuth=!1,this.checkedAddress=!1,this.checkedPayment=!1,this.orderItems=[],this.total=0,this.vat=10,this.fee=15,this.valueTotal=0,console.log(this.router.url,"Current URL")}var i,r,a;return i=n,(r=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){return(0,d.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.isLoggedIn();case 2:this.userAuth=e.sent,this.getCartProduct(),this.getAddress();case 5:case"end":return e.stop()}},e,this)}))}},{key:"openAddressModal",value:function(){return(0,d.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("openModal"),e.next=3,this.modalController.create({component:u.F,componentProps:{}});case 3:return e.next=5,e.sent.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))}},{key:"editAddressModal",value:function(e){return(0,d.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("openModal"),n.next=3,this.modalController.create({component:g.X,componentProps:{addressId:e}});case 3:return n.next=5,n.sent.present();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))}},{key:"getAddress",value:function(){console.log("______getAddress()"),this.addresses=this.userService.getAddressByUserId()}},{key:"addressGroupChange",value:function(e){console.log("addressGroupChange",e.detail),this.selectAddressId=e.detail.value,this.checkedAddress=!0,console.log("selectAddressId="+this.selectAddressId)}},{key:"paymentGroupChange",value:function(e){console.log("paymentGroupChange",e.detail),this.paymentType=e.detail.value,this.checkedPayment=!0,console.log("checkedPayment = "+this.checkedPayment),console.log("paymentType="+this.paymentType)}},{key:"getCartProduct",value:function(){var n=this.foodService.getCart();console.log("page not refresh__________________food-cart : items="+n),this.valueTotal=0;var t,o=e(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;this.valueTotal+=i.price}}catch(r){o.e(r)}finally{o.f()}this.orderItems=n,console.log("..............Order items ="+JSON.stringify(this.orderItems)),this.total=this.valueTotal,this.subTotal=Number(this.total.toFixed(2)),this.vatTotal=Number((this.subTotal*this.vat/100).toFixed(2)),this.feeTotal=Number((this.fee+this.vatTotal).toFixed(2)),this.grandTotal=Number((this.subTotal+this.feeTotal).toFixed(2))}},{key:"placeOrder",value:function(){this.checkedAddress?(console.log("selectAddressId = "+this.selectAddressId),this.checkedPayment?this.addOrder():this.ionicComponentService.presentAlert("Please choose payment method")):this.ionicComponentService.presentAlert("Please choose address")}},{key:"addOrder",value:function(){return(0,d.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("_____call addAddress"),this.ionicComponentService.presentLoading(),this.foodService.placeOrder(this.selectAddressId,this.paymentType,this.orderItems,this.grandTotal).then(function(){console.log("New item added."),n.ionicComponentService.dismissLoading(),n.router.navigateByUrl("/food-finish")},function(e){console.log(e),n.ionicComponentService.presentToast(e,3e3),n.ionicComponentService.dismissLoading()});case 1:case"end":return e.stop()}},e,this)}))}}])&&o(i.prototype,r),a&&o(i,a),n}(),q.\u0275fac=function(e){return new(e||q)(Z.Y36(h.K),Z.Y36(p.d),Z.Y36(c.gz),Z.Y36(l.SH),Z.Y36(l.IN),Z.Y36(c.F0),Z.Y36(m.d))},q.\u0275cmp=Z.Xpm({type:q,selectors:[["app-food-checkout"]],decls:103,vars:31,consts:[[1,"ion-no-border"],["slot","start"],["routerLink","/food-home","routerDirection","root"],["name","close-outline","color","success"],["color","success"],["padding",""],["fixed","",1,"ion-no-padding"],["size-lg","8","size-md","12","size-sm","12","size","12"],[1,"checkout-card"],["lines","none"],[1,"main-header5"],["lines","none","class","","lines","none",4,"ngFor","ngForOf"],["lines","none",1,"margin-top-15"],[1,"text-left"],[1,"main-b-header8"],["slot","end","text-right","",1,"main-b-header8"],["lines","none",1,"ion-margin-top"],["value","payment",3,"ionChange"],[1,"ion-padding-top","ion-padding-bottom","margin-top-15"],["slot","start","mode","md","color","warning","value","cc"],["slot","start","size","small","name","card-outline"],[1,"main-header7"],[1,"ion-padding-top","ion-padding-bottom"],["slot","start","mode","md","color","warning","value","paypal"],["slot","start","size","small","name","logo-playstation"],["slot","start","mode","md","color","warning","value","bank"],["slot","start","size","small","name","swap-horizontal-outline"],["slot","start","mode","md","color","warning","value","cash"],["slot","start","size","small","name","wallet-outline"],["size-lg","4","size-md","12","size-sm","12","size","12"],["value","address",3,"ionChange"],["class","ion-padding-top ion-padding-bottom",4,"ngFor","ngForOf"],["color","","fill","blank","expand","full",3,"click",4,"ngIf"],["size","5",1,"padding-left-15"],["color","dark"],[1,"main-header8","margin-top-3","margin-bottom-0"],["color","realgreen"],[1,"main-b-header5","margin-top-0"],["size","7"],["color","success","expand","full",3,"click"],["slot","start","name","checkmark-circle-outline"],["lines","none","lines","none",1,""],[3,"src"],[4,"ngFor","ngForOf"],["slot","end","text-right","",1,"main-header7"],[1,"ion-text-wrap"],["mode","md","color","warning","slot","start",3,"value"],["side","end"],["color","",3,"click"],["color","","fill","blank","expand","full",3,"click"]],template:function(e,n){1&e&&(Z.TgZ(0,"ion-header",0),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",1),Z.TgZ(3,"ion-button",2),Z._UZ(4,"ion-icon",3),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title",4),Z._uU(6,"Checkout"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(7,"ion-content",5),Z.TgZ(8,"ion-grid",6),Z.TgZ(9,"ion-row"),Z.TgZ(10,"ion-col",7),Z.TgZ(11,"ion-card",8),Z.TgZ(12,"ion-item",9),Z.TgZ(13,"h1",10),Z._uU(14,"Order summary"),Z.qZA(),Z.qZA(),Z.TgZ(15,"ion-list"),Z.YNc(16,A,14,9,"ion-item",11),Z.TgZ(17,"ion-item",12),Z.TgZ(18,"ion-label",13),Z.TgZ(19,"h1",14),Z._uU(20,"Subtotal:"),Z.qZA(),Z.qZA(),Z.TgZ(21,"h1",15),Z._uU(22),Z.ALo(23,"currency"),Z.qZA(),Z.qZA(),Z.TgZ(24,"ion-item",9),Z.TgZ(25,"ion-label",13),Z.TgZ(26,"h1",14),Z._uU(27),Z.qZA(),Z.qZA(),Z.TgZ(28,"p",15),Z._uU(29),Z.ALo(30,"currency"),Z.qZA(),Z.qZA(),Z.TgZ(31,"ion-item",9),Z.TgZ(32,"ion-label",13),Z.TgZ(33,"h1",14),Z._uU(34,"Delivery fee:"),Z.qZA(),Z.qZA(),Z.TgZ(35,"h1",15),Z._uU(36),Z.ALo(37,"currency"),Z.qZA(),Z.qZA(),Z.TgZ(38,"ion-item",16),Z.TgZ(39,"ion-label",13),Z.TgZ(40,"h1",14),Z._uU(41,"GrandTotal:"),Z.qZA(),Z.qZA(),Z.TgZ(42,"h1",15),Z._uU(43),Z.ALo(44,"currency"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(45,"ion-card",8),Z.TgZ(46,"ion-item",9),Z.TgZ(47,"h1",10),Z._uU(48,"Payment"),Z.qZA(),Z.qZA(),Z.TgZ(49,"ion-radio-group",17),Z.NdJ("ionChange",function(e){return n.paymentGroupChange(e)}),Z.TgZ(50,"div",18),Z.TgZ(51,"ion-item",9),Z._UZ(52,"ion-radio",19),Z._UZ(53,"ion-icon",20),Z.TgZ(54,"ion-label"),Z.TgZ(55,"h2",21),Z._uU(56,"Credit card"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(57,"div",22),Z.TgZ(58,"ion-item",9),Z._UZ(59,"ion-radio",23),Z._UZ(60,"ion-icon",24),Z.TgZ(61,"ion-label"),Z.TgZ(62,"h2",21),Z._uU(63,"Paypal"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(64,"div",22),Z.TgZ(65,"ion-item",9),Z._UZ(66,"ion-radio",25),Z._UZ(67,"ion-icon",26),Z.TgZ(68,"ion-label"),Z.TgZ(69,"h2",21),Z._uU(70,"Bank tranfer"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(71,"div",22),Z.TgZ(72,"ion-item",9),Z._UZ(73,"ion-radio",27),Z._UZ(74,"ion-icon",28),Z.TgZ(75,"ion-label"),Z.TgZ(76,"h2",21),Z._uU(77,"Cash on delivery"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(78,"ion-col",29),Z.TgZ(79,"ion-card",8),Z.TgZ(80,"ion-item",9),Z.TgZ(81,"h1",10),Z._uU(82,"Delivery address"),Z.qZA(),Z.qZA(),Z.TgZ(83,"ion-radio-group",30),Z.NdJ("ionChange",function(e){return n.addressGroupChange(e)}),Z.YNc(84,T,16,5,"div",31),Z.ALo(85,"async"),Z.qZA(),Z.YNc(86,v,2,0,"ion-button",32),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(87,"ion-footer"),Z.TgZ(88,"ion-toolbar"),Z.TgZ(89,"ion-grid",6),Z.TgZ(90,"ion-row"),Z.TgZ(91,"ion-col",33),Z.TgZ(92,"ion-text",34),Z.TgZ(93,"h1",35),Z._uU(94," Order total price "),Z.qZA(),Z.qZA(),Z.TgZ(95,"ion-text",36),Z.TgZ(96,"h1",37),Z._uU(97),Z.ALo(98,"currency"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(99,"ion-col",38),Z.TgZ(100,"ion-button",39),Z.NdJ("click",function(){return n.placeOrder()}),Z._uU(101," Place order "),Z._UZ(102,"ion-icon",40),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(16),Z.Q6J("ngForOf",n.orderItems),Z.xp6(6),Z.hij(" ",Z.Dn7(23,9,n.total,"USD","symbol")," "),Z.xp6(5),Z.hij("Tax(",n.vat,"%):"),Z.xp6(2),Z.hij(" ",Z.Dn7(30,13,n.vatTotal,"USD","symbol")," "),Z.xp6(7),Z.hij(" ",Z.Dn7(37,17,n.fee,"USD","symbol")," "),Z.xp6(7),Z.hij(" ",Z.Dn7(44,21,n.grandTotal,"USD","symbol")," "),Z.xp6(41),Z.Q6J("ngForOf",Z.lcZ(85,25,n.addresses)),Z.xp6(2),Z.Q6J("ngIf",n.userAuth),Z.xp6(11),Z.hij(" ",Z.Dn7(98,27,n.grandTotal,"USD","symbol")," "))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.YI,c.rH,l.gu,l.wd,l.W2,l.jY,l.Nd,l.wI,l.PM,l.Ie,l.q_,a.sg,l.Q$,l.se,l.QI,l.B7,l.U5,a.O5,l.fr,l.yW,l.Bs,l.Xz,l.td,l.IK,l.u8],pipes:[a.H9,a.Ov],styles:[""]}),q)}],y=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({imports:[[c.Bz.forChild(_)],c.Bz]}),e}(),b=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({imports:[[a.ez,s.u5,l.Pc,y]]}),e}()}}])}();