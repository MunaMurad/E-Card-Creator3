!function(){"use strict";function t(t,n){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(t,n)}(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return c=t.done,t},e:function(t){s=!0,a=t},f:function(){try{c||null==o.return||o.return()}finally{if(s)throw a}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(self.webpackChunkionic5fullapp_final=self.webpackChunkionic5fullapp_final||[]).push([[1710],{41710:function(e,i,r){r.r(i),r.d(i,{FoodCartPageModule:function(){return _}});var a=r(38583),c=r(93092),s=r(52462),u=r(84193),l=r(64762),g=r(60476),f=r(29785),d=r(73071);function h(t,e){if(1&t&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&t){var n=e.$implicit;g.xp6(1),g.hij("",n.name,"\t\xa0")}}function p(t,e){if(1&t){var n=g.EpF();g.TgZ(0,"ion-item-sliding",9,13),g.TgZ(2,"ion-item",14),g.TgZ(3,"ion-thumbnail",1),g._UZ(4,"ion-img",15),g.qZA(),g.TgZ(5,"ion-label",10),g.TgZ(6,"h3"),g._uU(7),g.qZA(),g.TgZ(8,"p"),g._uU(9),g.qZA(),g.TgZ(10,"p"),g._uU(11," Addon: "),g.YNc(12,h,2,1,"span",16),g.qZA(),g.qZA(),g.TgZ(13,"h5",17),g._uU(14),g.ALo(15,"currency"),g.qZA(),g.qZA(),g.TgZ(16,"ion-item-options",18),g.TgZ(17,"ion-item-option",19),g.NdJ("click",function(){var t=g.CHM(n).index,e=g.MAs(1);return g.oxw(2).removeCartProduct(t,e)}),g._UZ(18,"ion-icon",20),g.qZA(),g.qZA(),g.qZA()}if(2&t){var o=e.$implicit;g.xp6(4),g.Q6J("src",o.image),g.xp6(3),g.Oqu(o.name),g.xp6(2),g.hij("Size: ",o.size,""),g.xp6(3),g.Q6J("ngForOf",o.addOn),g.xp6(2),g.Oqu(g.Dn7(15,5,o.price,"USD","symbol"))}}function m(t,e){if(1&t&&(g.TgZ(0,"div"),g.TgZ(1,"ion-list"),g.YNc(2,p,19,9,"ion-item-sliding",8),g.TgZ(3,"ion-item",9),g.TgZ(4,"ion-label",10),g.TgZ(5,"h1",11),g._uU(6,"Total:"),g.qZA(),g.qZA(),g.TgZ(7,"h5",12),g._uU(8),g.ALo(9,"currency"),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t){var n=g.oxw();g.xp6(2),g.Q6J("ngForOf",n.selectedItems),g.xp6(6),g.Oqu(g.Dn7(9,2,n.total,"USD","symbol"))}}function v(t,e){1&t&&(g.TgZ(0,"div",21),g.TgZ(1,"div",22),g._UZ(2,"ion-icon",23),g.qZA(),g.TgZ(3,"div",24),g.TgZ(4,"ion-text",25),g.TgZ(5,"h1",26),g._uU(6,"Your shopping cart is empty"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"div"),g.TgZ(8,"ion-button",27),g._uU(9,"Continue shopping"),g.qZA(),g.qZA(),g.qZA())}function Z(t,e){if(1&t){var n=g.EpF();g.TgZ(0,"ion-footer"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-grid",5),g.TgZ(3,"ion-button",28),g.NdJ("click",function(){return g.CHM(n),g.oxw().checkout()}),g._uU(4,"Checkout"),g.qZA(),g.TgZ(5,"ion-button",27),g._uU(6,"Continue shopping"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}}var A,b=[{path:"",component:(A=function(){function e(t,o,i,r,a,c){n(this,e),this.foodService=t,this.userService=o,this.activatedRoute=i,this.navController=r,this.router=a,this.alertController=c,this.selectedItems=[],this.total=0,this.totalValue=0,this.userAuth=!1}var i,r,a;return i=e,(r=[{key:"ngOnInit",value:function(){return(0,l.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}))}},{key:"ionViewWillEnter",value:function(){return(0,l.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.isLoggedIn();case 2:return this.userAuth=t.sent,t.next=5,this.userService.getUserId();case 5:this.userId=t.sent,this.getCartProduct(),console.log("___this.userAuth="+this.userAuth),console.log("___this.userId="+this.userId);case 9:case"end":return t.stop()}},t,this)}))}},{key:"removeCartProduct",value:function(t,e){e.close(),console.log("removeCart"),this.foodService.removeItemCart(t),this.getCartProduct()}},{key:"getCartProduct",value:function(){var e=this.foodService.getCart();console.log("____food-cart : items="+e),this.totalValue=0;var n,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;this.totalValue+=i.price}}catch(r){o.e(r)}finally{o.f()}this.selectedItems=e,console.log("selected Addon="+this.selectedItems),this.total=this.totalValue}},{key:"getCartSameProduct",value:function(){var e,n=this.foodService.getCart(),o={},i=t(n);try{for(i.s();!(e=i.n()).done;){var r=e.value;o[r.itemId]?o[r.itemId].count++:o[r.itemId]=Object.assign(Object.assign({},r),{count:1})}}catch(a){i.e(a)}finally{i.f()}this.selectedItems=Object.keys(o).map(function(t){return o[t]}),console.log("selected Addon="+this.selectedItems),this.total=this.selectedItems.reduce(function(t,e){return t+e.count*e.price},0)}},{key:"presentAlertConfirm",value:function(){return(0,l.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:"No permission",message:"You have to signin first!",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(t){console.log("Confirm Cancel: blah")}},{text:"Login",handler:function(){console.log("Go to login page"),e.router.navigateByUrl("/fire-signin?redirectUrl=food-checkout")}}]});case 2:return t.next=4,t.sent.present();case 4:case"end":return t.stop()}},t,this)}))}},{key:"checkout",value:function(){this.userAuth?(console.log("checkout()___userAuth = true"),this.router.navigateByUrl("/food-checkout")):(console.log("checkout()___userAuth = false"),this.presentAlertConfirm())}}])&&o(i.prototype,r),a&&o(i,a),e}(),A.\u0275fac=function(t){return new(t||A)(g.Y36(f.d),g.Y36(d.K),g.Y36(u.gz),g.Y36(s.SH),g.Y36(u.F0),g.Y36(s.Br))},A.\u0275cmp=g.Xpm({type:A,selectors:[["app-food-cart"]],decls:11,vars:3,consts:[[1,"ion-no-border"],["slot","start"],["color","success"],["color","success",1,"main-b-header6"],["padding",""],["fixed","",1,"ion-no-padding"],[4,"ngIf"],["text-center","",4,"ngIf"],["lines","none","class","ion-margin-top",4,"ngFor","ngForOf"],["lines","none",1,"ion-margin-top"],[1,"text-left"],[1,"main-b-header8"],["slot","end","text-right","",1,"main-b-header8"],["slidingItem",""],["lines","none"],[3,"src"],[4,"ngFor","ngForOf"],["slot","end","text-right","",1,"main-header7"],["side","end"],[3,"click"],["slot","icon-only","size","small","name","trash"],["text-center",""],[1,"logo-box"],["name","basket-outline","color","light",1,"notification","pop-in"],[1,"ion-text-center"],["color","ulightgrey",1,"ion-margin-bottom"],[1,"main-header5"],["color","","fill","blank","expand","full","routerLink","/food-home"],["color","success","expand","full",3,"click"]],template:function(t,e){1&t&&(g.TgZ(0,"ion-header",0),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",1),g._UZ(3,"ion-back-button",2),g.qZA(),g.TgZ(4,"ion-title",3),g._uU(5,"Cart"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"ion-content",4),g.TgZ(7,"ion-grid",5),g.YNc(8,m,10,6,"div",6),g.YNc(9,v,10,0,"div",7),g.qZA(),g.qZA(),g.YNc(10,Z,7,0,"ion-footer",6)),2&t&&(g.xp6(8),g.Q6J("ngIf",e.selectedItems.length),g.xp6(1),g.Q6J("ngIf",!e.selectedItems.length),g.xp6(1),g.Q6J("ngIf",e.selectedItems.length))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.W2,s.jY,a.O5,s.q_,a.sg,s.Ie,s.Q$,s.td,s.Bs,s.Xz,s.IK,s.u8,s.gu,s.yW,s.YG,s.YI,u.rH,s.fr],pipes:[a.H9],styles:["ion-thumbnail[_ngcontent-%COMP%]{--size: 50px;border-radius:8px!important;background-color:#ddd}ion-thumbnail[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{border-radius:8px!important}.fixedLabel[_ngcontent-%COMP%]{min-width:100%!important;max-width:100%!important}.logo-box[_ngcontent-%COMP%]{width:100%;height:200px;position:relative;overflow:hidden;margin-top:20%}.logo-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:140px;height:140px;top:0;bottom:0;right:0;left:0;margin:auto}.logo-box[_ngcontent-%COMP%]   ion-icon.notification[_ngcontent-%COMP%]{font-size:150px;position:absolute;width:140px;height:140px;top:0;bottom:0;right:0;left:0;margin:auto}"]}),A)}],x=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[u.Bz.forChild(b)],u.Bz]}),t}(),_=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[a.ez,c.u5,s.Pc,x]]}),t}()}}])}();