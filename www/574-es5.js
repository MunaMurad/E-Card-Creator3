!function(){"use strict";function e(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==o.return||o.return()}finally{if(l)throw a}}}}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(self.webpackChunkionic5fullapp_final=self.webpackChunkionic5fullapp_final||[]).push([[574],{50574:function(n,i,r){r.r(i),r.d(i,{ShoppingCheckoutPageModule:function(){return b}});var a=r(38583),s=r(93092),l=r(52462),c=r(84193),u=r(64762),d=r(80226),g=r(21444),Z=r(73028),p=r(60476),h=r(73071),m=r(67092);function f(e,n){if(1&e&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&e){var t=n.$implicit;p.xp6(1),p.hij("",t.name," \xa0")}}function A(e,n){if(1&e&&(p.TgZ(0,"ion-item",41),p.TgZ(1,"ion-thumbnail",1),p._UZ(2,"ion-img",42),p.qZA(),p.TgZ(3,"ion-label",13),p.TgZ(4,"h3"),p._uU(5),p.qZA(),p.TgZ(6,"p"),p._uU(7),p.qZA(),p.TgZ(8,"p"),p._uU(9," Addon: "),p.YNc(10,f,2,1,"span",43),p.qZA(),p.qZA(),p.TgZ(11,"h5",44),p._uU(12),p.ALo(13,"currency"),p.qZA(),p.qZA()),2&e){var t=n.$implicit;p.xp6(2),p.Q6J("src",t.image),p.xp6(3),p.Oqu(t.name),p.xp6(2),p.hij("Size: ",t.size,""),p.xp6(3),p.Q6J("ngForOf",t.addOn),p.xp6(2),p.Oqu(p.Dn7(13,5,t.price,"USD","symbol"))}}function T(e,n){if(1&e){var t=p.EpF();p.TgZ(0,"div",22),p.TgZ(1,"ion-item-sliding"),p.TgZ(2,"ion-item",9),p.TgZ(3,"ion-label"),p.TgZ(4,"p"),p._uU(5),p.qZA(),p.TgZ(6,"h3"),p._uU(7),p.qZA(),p.TgZ(8,"h3",45),p._uU(9),p.qZA(),p.TgZ(10,"h3"),p._uU(11),p.qZA(),p.qZA(),p._UZ(12,"ion-radio",46),p.qZA(),p.TgZ(13,"ion-item-options",47),p.TgZ(14,"ion-item-option",48),p.NdJ("click",function(){var e=p.CHM(t).$implicit;return p.oxw().editAddressModal(e.id)}),p._uU(15,"Edit"),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&e){var o=n.$implicit;p.xp6(5),p.Oqu(o.label),p.xp6(2),p.Oqu(o.fullname),p.xp6(2),p.Oqu(o.address),p.xp6(2),p.Oqu(o.phone),p.xp6(1),p.Q6J("value",o.id)}}function q(e,n){if(1&e){var t=p.EpF();p.TgZ(0,"ion-button",49),p.NdJ("click",function(){return p.CHM(t),p.oxw().openAddressModal()}),p._uU(1,"Add address "),p.qZA()}}var v,_=[{path:"",component:(v=function(){function n(e,o,i,r,a,s,l){t(this,n),this.userService=e,this.shoppingService=o,this.activatedRoute=i,this.navController=r,this.modalController=a,this.router=s,this.ionicComponentService=l,this.userAuth=!1,this.checkedAddress=!1,this.checkedPayment=!1,this.orderItems=[],this.total=0,this.vat=10,this.fee=15,this.valueTotal=0,console.log(this.router.url,"Current URL")}var i,r,a;return i=n,(r=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){return(0,u.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.isLoggedIn();case 2:this.userAuth=e.sent,this.getCartProduct(),this.getAddress();case 5:case"end":return e.stop()}},e,this)}))}},{key:"openAddressModal",value:function(){return(0,u.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("openModal"),e.next=3,this.modalController.create({component:g.A,componentProps:{}});case 3:return e.next=5,e.sent.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))}},{key:"editAddressModal",value:function(e){return(0,u.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("openModal"),n.next=3,this.modalController.create({component:Z.k,componentProps:{addressId:e}});case 3:return n.next=5,n.sent.present();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))}},{key:"getAddress",value:function(){console.log("______getAddress()"),this.addresses=this.userService.getAddressByUserId()}},{key:"addressGroupChange",value:function(e){console.log("addressGroupChange",e.detail),this.selectAddressId=e.detail.value,this.checkedAddress=!0,console.log("selectAddressId="+this.selectAddressId)}},{key:"paymentGroupChange",value:function(e){console.log("paymentGroupChange",e.detail),this.paymentType=e.detail.value,this.checkedPayment=!0,console.log("checkedPayment = "+this.checkedPayment),console.log("paymentType="+this.paymentType)}},{key:"getCartProduct",value:function(){var n=this.shoppingService.getCart();console.log("page not refresh__________________food-cart : items="+n),this.valueTotal=0;var t,o=e(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;this.valueTotal+=i.price}}catch(r){o.e(r)}finally{o.f()}this.orderItems=n,console.log("..............Order items ="+JSON.stringify(this.orderItems)),this.total=this.valueTotal,this.subTotal=Number(this.total.toFixed(2)),this.vatTotal=Number((this.subTotal*this.vat/100).toFixed(2)),this.feeTotal=Number((this.fee+this.vatTotal).toFixed(2)),this.grandTotal=Number((this.subTotal+this.feeTotal).toFixed(2))}},{key:"placeOrder",value:function(){this.checkedAddress?(console.log("selectAddressId = "+this.selectAddressId),this.checkedPayment?this.addOrder():this.ionicComponentService.presentAlert("Please choose payment method")):this.ionicComponentService.presentAlert("Please choose address")}},{key:"addOrder",value:function(){return(0,u.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("_____call addAddress"),this.ionicComponentService.presentLoading(),this.shoppingService.placeOrder(this.selectAddressId,this.paymentType,this.orderItems,this.grandTotal).then(function(){console.log("New item added."),n.ionicComponentService.dismissLoading(),n.router.navigateByUrl("/shopping-finish")},function(e){console.log(e),n.ionicComponentService.presentToast(e,3e3),n.ionicComponentService.dismissLoading()});case 1:case"end":return e.stop()}},e,this)}))}}])&&o(i.prototype,r),a&&o(i,a),n}(),v.\u0275fac=function(e){return new(e||v)(p.Y36(h.K),p.Y36(d.s),p.Y36(c.gz),p.Y36(l.SH),p.Y36(l.IN),p.Y36(c.F0),p.Y36(m.d))},v.\u0275cmp=p.Xpm({type:v,selectors:[["app-shopping-checkout"]],decls:103,vars:31,consts:[[1,"ion-no-border"],["slot","start"],["routerLink","/shopping-home","routerDirection","root"],["name","close-outline","color","warning"],["color","warning"],["padding",""],["fixed","",1,"ion-no-padding"],["size-lg","8","size-md","12","size-sm","12","size","12"],[1,"checkout-card"],["lines","none"],[1,"main-header5"],["lines","none","class","","lines","none",4,"ngFor","ngForOf"],["lines","none",1,"margin-top-15"],[1,"text-left"],[1,"main-b-header8"],["slot","end","text-right","",1,"main-b-header8"],["lines","none",1,"ion-margin-top"],["value","payment",3,"ionChange"],[1,"ion-padding-top","ion-padding-bottom","margin-top-15"],["slot","start","mode","md","color","warning","value","cc"],["slot","start","size","small","name","card-outline"],[1,"main-header7"],[1,"ion-padding-top","ion-padding-bottom"],["slot","start","mode","md","color","warning","value","paypal"],["slot","start","size","small","name","logo-playstation"],["slot","start","mode","md","color","warning","value","bank"],["slot","start","size","small","name","swap-horizontal-outline"],["slot","start","mode","md","color","warning","value","cash"],["slot","start","size","small","name","wallet-outline"],["size-lg","4","size-md","12","size-sm","12","size","12"],["value","address",3,"ionChange"],["class","ion-padding-top ion-padding-bottom",4,"ngFor","ngForOf"],["color","","fill","blank","expand","full",3,"click",4,"ngIf"],["size","5"],["color","dark"],[1,"main-header8","margin-top-3","margin-bottom-0"],["color","realgreen"],[1,"main-b-header5","margin-top-0"],["size","7"],["color","warning","expand","full",3,"click"],["slot","start","name","checkmark-circle-outline"],["lines","none","lines","none",1,""],[3,"src"],[4,"ngFor","ngForOf"],["slot","end","text-right","",1,"main-header7"],[1,"ion-text-wrap"],["mode","md","color","warning","slot","start",3,"value"],["side","end"],["color","",3,"click"],["color","","fill","blank","expand","full",3,"click"]],template:function(e,n){1&e&&(p.TgZ(0,"ion-header",0),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-buttons",1),p.TgZ(3,"ion-button",2),p._UZ(4,"ion-icon",3),p.qZA(),p.qZA(),p.TgZ(5,"ion-title",4),p._uU(6,"Checkout"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(7,"ion-content",5),p.TgZ(8,"ion-grid",6),p.TgZ(9,"ion-row"),p.TgZ(10,"ion-col",7),p.TgZ(11,"ion-card",8),p.TgZ(12,"ion-item",9),p.TgZ(13,"h1",10),p._uU(14,"Order summary"),p.qZA(),p.qZA(),p.TgZ(15,"ion-list"),p.YNc(16,A,14,9,"ion-item",11),p.TgZ(17,"ion-item",12),p.TgZ(18,"ion-label",13),p.TgZ(19,"h1",14),p._uU(20,"Subtotal:"),p.qZA(),p.qZA(),p.TgZ(21,"h1",15),p._uU(22),p.ALo(23,"currency"),p.qZA(),p.qZA(),p.TgZ(24,"ion-item",9),p.TgZ(25,"ion-label",13),p.TgZ(26,"h1",14),p._uU(27),p.qZA(),p.qZA(),p.TgZ(28,"p",15),p._uU(29),p.ALo(30,"currency"),p.qZA(),p.qZA(),p.TgZ(31,"ion-item",9),p.TgZ(32,"ion-label",13),p.TgZ(33,"h1",14),p._uU(34,"Shipping fee:"),p.qZA(),p.qZA(),p.TgZ(35,"h1",15),p._uU(36),p.ALo(37,"currency"),p.qZA(),p.qZA(),p.TgZ(38,"ion-item",16),p.TgZ(39,"ion-label",13),p.TgZ(40,"h1",14),p._uU(41,"GrandTotal:"),p.qZA(),p.qZA(),p.TgZ(42,"h1",15),p._uU(43),p.ALo(44,"currency"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(45,"ion-card",8),p.TgZ(46,"ion-item",9),p.TgZ(47,"h1",10),p._uU(48,"Payment"),p.qZA(),p.qZA(),p.TgZ(49,"ion-radio-group",17),p.NdJ("ionChange",function(e){return n.paymentGroupChange(e)}),p.TgZ(50,"div",18),p.TgZ(51,"ion-item",9),p._UZ(52,"ion-radio",19),p._UZ(53,"ion-icon",20),p.TgZ(54,"ion-label"),p.TgZ(55,"h2",21),p._uU(56,"Credit card"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(57,"div",22),p.TgZ(58,"ion-item",9),p._UZ(59,"ion-radio",23),p._UZ(60,"ion-icon",24),p.TgZ(61,"ion-label"),p.TgZ(62,"h2",21),p._uU(63,"Paypal"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(64,"div",22),p.TgZ(65,"ion-item",9),p._UZ(66,"ion-radio",25),p._UZ(67,"ion-icon",26),p.TgZ(68,"ion-label"),p.TgZ(69,"h2",21),p._uU(70,"Bank tranfer"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(71,"div",22),p.TgZ(72,"ion-item",9),p._UZ(73,"ion-radio",27),p._UZ(74,"ion-icon",28),p.TgZ(75,"ion-label"),p.TgZ(76,"h2",21),p._uU(77,"Cash on delivery"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(78,"ion-col",29),p.TgZ(79,"ion-card",8),p.TgZ(80,"ion-item",9),p.TgZ(81,"h1",10),p._uU(82,"Shipping address"),p.qZA(),p.qZA(),p.TgZ(83,"ion-radio-group",30),p.NdJ("ionChange",function(e){return n.addressGroupChange(e)}),p.YNc(84,T,16,5,"div",31),p.ALo(85,"async"),p.qZA(),p.YNc(86,q,2,0,"ion-button",32),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(87,"ion-footer"),p.TgZ(88,"ion-toolbar"),p.TgZ(89,"ion-grid",6),p.TgZ(90,"ion-row"),p.TgZ(91,"ion-col",33),p.TgZ(92,"ion-text",34),p.TgZ(93,"h1",35),p._uU(94,"Order total price"),p.qZA(),p.qZA(),p.TgZ(95,"ion-text",36),p.TgZ(96,"h1",37),p._uU(97),p.ALo(98,"currency"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(99,"ion-col",38),p.TgZ(100,"ion-button",39),p.NdJ("click",function(){return n.placeOrder()}),p._uU(101," Place order "),p._UZ(102,"ion-icon",40),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(16),p.Q6J("ngForOf",n.orderItems),p.xp6(6),p.Oqu(p.Dn7(23,9,n.total,"USD","symbol")),p.xp6(5),p.hij("Vat(",n.vat,"%):"),p.xp6(2),p.Oqu(p.Dn7(30,13,n.vatTotal,"USD","symbol")),p.xp6(7),p.Oqu(p.Dn7(37,17,n.fee,"USD","symbol")),p.xp6(7),p.Oqu(p.Dn7(44,21,n.grandTotal,"USD","symbol")),p.xp6(41),p.Q6J("ngForOf",p.lcZ(85,25,n.addresses)),p.xp6(2),p.Q6J("ngIf",n.userAuth),p.xp6(11),p.Oqu(p.Dn7(98,27,n.grandTotal,"USD","symbol")))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.YI,c.rH,l.gu,l.wd,l.W2,l.jY,l.Nd,l.wI,l.PM,l.Ie,l.q_,a.sg,l.Q$,l.se,l.QI,l.B7,l.U5,a.O5,l.fr,l.yW,l.Bs,l.Xz,l.td,l.IK,l.u8],pipes:[a.H9,a.Ov],styles:[""]}),v)}],y=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[c.Bz.forChild(_)],c.Bz]}),e}(),b=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[a.ez,s.u5,l.Pc,y]]}),e}()}}])}();